import{f as A,h as B,c as r,o as i,a as t,r as C,F as E,i as O,t as m,n as S,u as L,j as D,k as b,l as T,m as V,p as I,q as x,d as M,w as _,b as k}from"./main-DzO-y34Y.js";import{_ as W}from"./plugin-vueexport-helper-DlAUqK2U.js";const F={class:"flex justify-between mb-1"},H={class:"font-bold text-xl"},R={class:"text-2xl"},U=["onClick"],G={class:"absolute bottom-1 right-1 flex"},K=["onClick"],J={class:"text-center"},q={__name:"ModuleOverview",props:{modules:{type:Object,required:!0},baseCreditPoints:{type:Number,required:!1,default:5}},emits:["moduleClick"],setup(p,{emit:h}){const s=p,d=h;function v(u){d("moduleClick",u)}const y=A(s.modules),g=B(s.baseCreditPoints),o=y.reduce((u,c)=>Math.max(u,c.semester),0),w=A([]);for(let u=1;u<=o;u++)w.push(y.filter(c=>c.semester===u));const N=w.reduce((u,c)=>Math.max(u,c.length),0);function $(u){window.alert(u)}return(u,c)=>(i(),r("div",null,[t("div",F,[t("h2",H,[C(u.$slots,"title-left")]),C(u.$slots,"title-right")]),t("div",{class:"w-full grid gap-3",style:S({gridTemplateRows:`repeat(${w.length}, 1fr)`})},[(i(!0),r(E,null,O(w,(P,j)=>(i(),r("div",{key:P,class:"flex items-center gap-3"},[t("span",R,m(j+1),1),t("div",{class:"grid gap-3 h-full w-full",style:S({gridTemplateColumns:`repeat(${L(N)}, 1fr)`})},[(i(!0),r(E,null,O(P,f=>(i(),r("div",{key:f,style:S({"grid-column":`span ${Math.max(1,parseInt(f.creditPoints/g.value))} / span ${Math.max(1,parseInt(f.creditPoints/g.value))}`})},[t("div",{for:"",lang:"de",class:D(["relative btn p-1 h-full hyphens-auto flex flex-col items-center text-xs md:text-sm",f.state]),onClick:n=>v(f)},[t("div",G,[f.info?(i(),r("svg",{key:0,class:"size-5 cursor-help",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",onClick:T(n=>$(f.info),["stop"])},c[1]||(c[1]=[t("g",{fill:"currentColor","stroke-linejoin":"miter","stroke-linecap":"butt"},[t("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"currentColor","stroke-linecap":"square","stroke-miterlimit":"10","stroke-width":"2"}),t("path",{d:"m12,17v-5.5c0-.276-.224-.5-.5-.5h-1.5",fill:"none",stroke:"currentColor","stroke-linecap":"square","stroke-miterlimit":"10","stroke-width":"2"}),t("circle",{cx:"12",cy:"7.25",r:"1.25",fill:"currentColor","stroke-width":"2"})],-1)]),8,K)):b("",!0),f.group?(i(),r("svg",{key:1,title:"Wahlmodul",class:"size-5 cursor-help pointer-events-auto",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",onClick:c[0]||(c[0]=T(n=>$("Wahlmodul"),["stop"]))},c[2]||(c[2]=[t("path",{stroke:"currentColor","stroke-linecap":"round","stroke-width":"2",d:"M9 8h10M9 12h10M9 16h10M4.99 8H5m-.02 4h.01m0 4H5"},null,-1)]))):b("",!0)]),t("span",J,m(f.chosenModule||f.name),1),t("p",null,m(f.creditPoints)+" cp",1)],10,U)],4))),128))],4)]))),128))],4)]))}},Q={class:"modal-box relative"},X={class:"flex w-full justify-between mb-3"},Y={class:"text-2xl font-semibold"},Z={__name:"Popup",emits:["close"],setup(p,{expose:h,emit:s}){const d=s,v=B(null);function y(){var o;(o=v.value)==null||o.showModal()}function g(){var o;(o=v.value)==null||o.close()}return h({open:y,close:g}),V(()=>{var o;(o=v.value)==null||o.addEventListener("close",()=>{d("close")})}),(o,w)=>(i(),r("dialog",{id:"my_modal",class:"modal",ref_key:"dialogElement",ref:v},[t("div",Q,[t("div",X,[t("h2",Y,[C(o.$slots,"title")]),t("button",{class:"btn btn-sm btn-circle",onClick:g,"aria-label":"Close modal"},"✕")]),C(o.$slots,"default")]),t("form",{method:"dialog",class:"modal-backdrop",onClick:g},w[0]||(w[0]=[t("button",{type:"button"},"close",-1)]))],512))}},ee={},te={class:"flex flex-col gap-1"};function ne(p,h){return i(),r("div",te,h[0]||(h[0]=[I('<h2 class="font-bold">Legende</h2><div class="join"><button class="btn btn-primary join-item">Übertragung</button><button class="btn btn-secondary join-item">Anerkennung</button><button class="btn btn-error join-item">Keine Entsprechung</button></div>',2)]))}const se=W(ee,[["render",ne]]),oe={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"h-6 w-6 shrink-0 stroke-current"},le={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24"},re={key:2,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24"},ie={key:3,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24"},ue={class:"text-base font-semibold"},z={__name:"Info",props:{type:{type:String,default:"info",required:!1},message:{type:String,default:"This is an info message."}},setup(p){const h={info:"alert-info",success:"alert-success",warning:"alert-warning",error:"alert-error"};return(s,d)=>(i(),r("div",{class:D(["alert",h[p.type]])},[p.type==="info"?(i(),r("svg",oe,d[0]||(d[0]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):b("",!0),p.type==="success"?(i(),r("svg",le,d[1]||(d[1]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):b("",!0),p.type==="warning"?(i(),r("svg",re,d[2]||(d[2]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"},null,-1)]))):b("",!0),p.type==="error"?(i(),r("svg",ie,d[3]||(d[3]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):b("",!0),t("span",ue,m(p.message),1)],2))}},ae={key:0,class:"grid gap-3 grid-cols-1"},de=["disabled","onClick"],ce={class:"flex flex-col items-center w-full h-full gap-3"},fe={class:"font-bold text-3xl"},pe={class:"flex flex-col w-full items-center gap-9"},me={class:"w-full flex justify-between items-center"},ge={key:0},we={class:"flex gap-3"},be={key:1},he={class:"flex gap-3"},ve={key:2},ye={__name:"ModuleComparator",props:{poTransitionData:{type:Object,required:!0}},setup(p){const s=A(p.poTransitionData);s.oldModules=s.oldModules.map(n=>({state:"btn-neutral",...n})),s.newModules=s.newModules.map(n=>({state:"",...n}));function d(n){const e=n.group;let l;if(e!==void 0){if(l=s.newModules.find(a=>a.chosenModule===n.newModule),l||(l=s.newModules.find(a=>a.group===e&&!a.chosenModule)),!l)return;l.chosenModule=n.newModule}else l=s.newModules.find(a=>a.name===n.newModule);l&&(l.state=n.type==="Übertragung"?"btn-primary":"btn-secondary")}function v(n){const e=n.group;let l;if(e!==void 0){if(l=s.newModules.find(a=>a.chosenModule===n.newModule),l||(l=s.newModules.find(a=>a.group===e&&!a.chosenModule)),!l)return;l.chosenModule=void 0}else l=s.newModules.find(a=>a.name===n.newModule);l&&(l.state="")}function y(n){if(n.group!==void 0){o.value=n,g.value.open();return}const e=n.transition;if(n.state==="btn-neutral"){if(e.type==="keine Entsprechung"){n.state="btn-error";return}n.state=e.type==="Übertragung"?"btn-primary":"btn-secondary",d(e);return}n.state="btn-neutral",e.type!=="keine Entsprechung"&&v(e)}const g=B(null),o=B(null);function w(n){if(o.value.state="btn-neutral",o.value.transition&&(v(o.value.transition),o.value.chosenModule=void 0),n!==void 0){const e=n.transition,l={"keine Entsprechung":"btn-error",Übertragung:"btn-primary",Anerkennung:"btn-secondary"};o.value.chosenModule=n.name,o.value.state=l[e.type],o.value.transition=e,d(e)}o.value=null,g.value.close()}function N(){s.oldModules.forEach(n=>{n.state="btn-neutral",n.chosenModule=void 0}),s.newModules.forEach(n=>{n.state="",n.chosenModule=void 0})}const $=x(()=>s.oldModules.reduce((n,e)=>n+(e.state!=="btn-neutral"?e.creditPoints:0),0)),u=x(()=>s.oldModules.reduce((n,e)=>n+(e.state!=="btn-neutral"?1:0),0)),c=x(()=>s.oldModules.length-u.value),P=x(()=>s.newModules.reduce((n,e)=>n+(e.state!==""?e.creditPoints:0),0)),j=x(()=>s.newModules.reduce((n,e)=>n+(e.state!==""?1:0),0)),f=x(()=>s.newModules.length-j.value);return(n,e)=>(i(),r(E,null,[M(Z,{ref_key:"choseModuleDialog",ref:g},{title:_(()=>e[1]||(e[1]=[k("Wahlmodul")])),default:_(()=>[o.value!==null?(i(),r("div",ae,[t("button",{class:"btn btn-error",onClick:e[0]||(e[0]=l=>w())},"Auswahl Aufheben"),(i(!0),r(E,null,O(s.oldGroups[o.value.group],l=>(i(),r("div",{key:l},[t("button",{class:"btn btn-primary w-full",disabled:s.oldModules.some(a=>a.chosenModule===l.name),onClick:a=>w(l)},m(l.name),9,de)]))),128))])):b("",!0)]),_:1},512),t("div",ce,[t("h1",fe,[C(n.$slots,"title")]),t("div",pe,[t("div",me,[M(se),t("button",{class:"btn btn-warning",onClick:N},"Reset")]),s.infoPos1?(i(),r("div",ge,[M(z,{message:s.infoPos1.text,type:s.infoPos1.type},null,8,["message","type"])])):b("",!0),M(q,{modules:s.oldModules,baseCreditPoints:s.baseCreditPoints,onModuleClick:y},{"title-left":_(()=>e[2]||(e[2]=[k(" Alte Prüfungsordnung ")])),"title-right":_(()=>[t("div",we,[t("span",null,[e[3]||(e[3]=k("Bestanden: ")),t("b",null,m(u.value),1)]),t("span",null,[e[4]||(e[4]=k("Offen: ")),t("b",null,m(c.value),1)]),t("span",null,[e[5]||(e[5]=k("cp: ")),t("b",null,m($.value),1)])])]),_:1},8,["modules","baseCreditPoints"]),s.infoPos2?(i(),r("div",be,[M(z,{message:s.infoPos2.text,type:s.infoPos2.type},null,8,["message","type"])])):b("",!0),M(q,{modules:s.newModules,baseCreditPoints:s.baseCreditPoints},{"title-left":_(()=>e[6]||(e[6]=[k(" Neue Prüfungsordnung ")])),"title-right":_(()=>[t("div",he,[t("span",null,[e[7]||(e[7]=k("Angerechnet: ")),t("b",null,m(j.value),1)]),t("span",null,[e[8]||(e[8]=k("Offen: ")),t("b",null,m(f.value),1)]),t("span",null,[e[9]||(e[9]=k("cp: ")),t("b",null,m(P.value),1)])])]),_:1},8,["modules","baseCreditPoints"]),s.infoPos3?(i(),r("div",ve,[M(z,{message:s.infoPos3.text,type:s.infoPos3.type},null,8,["message","type"])])):b("",!0)])])],64))}};export{ye as _};
